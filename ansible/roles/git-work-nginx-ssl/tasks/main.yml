- name: ensure upstream file exists
  copy:
    content: |
      listen 443 ssl http2;
      ssl on;
      ssl_certificate /etc/ssl/git.work/git.work.pem;
      ssl_certificate_key /etc/ssl/git.work/git.work.key;
    dest: /etc/nginx/conf.d/git-work.https.include
  register: https_include

- name: reload nginx service
  systemd:
    name: nginx
    state: reloaded
  when: https_include.changed
